import { Delay, ISource, Stop, Timestamp, Vehicle } from '.';
import { addSeconds } from '../utils/dates';
import { randInt } from '../utils/random';
import { CoordinateSystem } from '../utils/geo';

const STOPS = JSON.parse('[{"stopId":8227,"name":"DąbrowaCentrum 04","latitude":54.47317,"longitude":18.46509,"coordinateSystem":4326},{"stopId":8228,"name":"Kameliowa 02","latitude":54.47018,"longitude":18.4682,"coordinateSystem":4326},{"stopId":8229,"name":"Paprykowa 02","latitude":54.46784,"longitude":18.46546,"coordinateSystem":4326},{"stopId":8230,"name":"Szafranowa 02","latitude":54.46536,"longitude":18.4602,"coordinateSystem":4326},{"stopId":8231,"name":"GiełdaTowarowa 02","latitude":54.46224,"longitude":18.45337,"coordinateSystem":4326},{"stopId":8232,"name":"Rdestowa-Chwaszczyńska 04","latitude":54.45874,"longitude":18.4528,"coordinateSystem":4326},{"stopId":8233,"name":"Starochwaszczyńska 02","latitude":54.45696,"longitude":18.4495,"coordinateSystem":4326},{"stopId":8234,"name":"CentrumNadawczeRTV 02","latitude":54.45176,"longitude":18.43933,"coordinateSystem":4326},{"stopId":8235,"name":"Gdyńska 01","latitude":54.44749,"longitude":18.42771,"coordinateSystem":4326},{"stopId":8236,"name":"Chwaszczyno 01","latitude":54.44345,"longitude":18.42077,"coordinateSystem":4326}]')
const LIVE = JSON.parse('{"lastUpdate":"2020-01-1412:24:46","vehicles":[{"line":"189","vehicleId":463,"speed":35,"delay":-72,"lat":54.34693908691406,"lon":18.645200729370117,"gpsQuality":3},{"line":"256","vehicleId":145643,"speed":5,"delay":96,"lat":54.33988952636719,"lon":18.64052963256836,"gpsQuality":3},{"line":"178","vehicleId":75,"speed":0,"delay":61,"lat":54.35694885253906,"lon":18.646339416503906,"gpsQuality":3},{"line":"158","vehicleId":455,"speed":0,"delay":0,"lat":54.381710052490234,"lon":18.604400634765625,"gpsQuality":3},{"line":"155","vehicleId":458,"speed":0,"delay":0,"lat":54.35285186767578,"lon":18.549680709838867,"gpsQuality":3},{"line":"199","vehicleId":145721,"speed":35,"delay":75,"lat":54.40217971801758,"lon":18.580440521240234,"gpsQuality":3},{"line":"6","vehicleId":445,"speed":0,"delay":64,"lat":54.3514518737793,"lon":18.646419525146484,"gpsQuality":3},{"line":"115","vehicleId":145704,"speed":0,"delay":220,"lat":54.36676025390625,"lon":18.626659393310547,"gpsQuality":3},{"line":"10","vehicleId":439,"speed":0,"delay":0,"lat":54.366310119628906,"lon":18.574399948120117,"gpsQuality":3},{"line":"207","vehicleId":145649,"speed":0,"delay":0,"lat":54.354888916015625,"lon":18.645740509033203,"gpsQuality":3},{"line":"199","vehicleId":186,"speed":0,"delay":0,"lat":54.36153030395508,"lon":18.645870208740234,"gpsQuality":3},{"line":"12","vehicleId":141566,"speed":0,"delay":0,"lat":54.352481842041016,"lon":18.575790405273438,"gpsQuality":3},{"line":"T8","vehicleId":361,"speed":10,"delay":9,"lat":54.36500930786133,"lon":18.713529586791992,"gpsQuality":3},{"line":"100","vehicleId":522,"speed":15,"delay":101,"lat":54.35382843017578,"lon":18.6536808013916,"gpsQuality":3},{"line":"118","vehicleId":145731,"speed":0,"delay":0,"lat":54.361419677734375,"lon":18.64579963684082,"gpsQuality":3},{"line":"186","vehicleId":145735,"speed":25,"delay":115,"lat":54.33877944946289,"lon":18.73771095275879,"gpsQuality":3},{"line":"167","vehicleId":205,"speed":55,"delay":17,"lat":54.34946823120117,"lon":18.516830444335938,"gpsQuality":3},{"line":"175","vehicleId":145703,"speed":35,"delay":66,"lat":54.314361572265625,"lon":18.600830078125,"gpsQuality":3},{"line":"2","vehicleId":414,"speed":0,"delay":-18,"lat":54.415618896484375,"lon":18.587060928344727,"gpsQuality":3},{"line":"127","vehicleId":188,"speed":40,"delay":17,"lat":54.35462188720703,"lon":18.577369689941406,"gpsQuality":3},{"line":"205","vehicleId":145638,"speed":0,"delay":0,"lat":54.3550910949707,"lon":18.6458797454834,"gpsQuality":3},{"line":"10","vehicleId":483,"speed":0,"delay":159,"lat":54.37200927734375,"lon":18.633779525756836,"gpsQuality":3},{"line":"111","vehicleId":505,"speed":25,"delay":106,"lat":54.35803985595703,"lon":18.64592933654785,"gpsQuality":3},{"line":"167","vehicleId":145727,"speed":20,"delay":-29,"lat":54.35300827026367,"lon":18.645360946655273,"gpsQuality":3},{"line":"117","vehicleId":145661,"speed":5,"delay":62,"lat":54.413570404052734,"lon":18.577259063720703,"gpsQuality":3},{"line":"9","vehicleId":437,"speed":20,"delay":-24,"lat":54.34872055053711,"lon":18.645530700683594,"gpsQuality":3},{"line":"157","vehicleId":457,"speed":5,"delay":10,"lat":54.3543586730957,"lon":18.489789962768555,"gpsQuality":3},{"line":"199","vehicleId":209,"speed":10,"delay":229,"lat":54.3586311340332,"lon":18.623010635375977,"gpsQuality":3},{"line":"162","vehicleId":91,"speed":10,"delay":30,"lat":54.3586311340332,"lon":18.587509155273438,"gpsQuality":3},{"line":"148","vehicleId":145739,"speed":0,"delay":44,"lat":54.424259185791016,"lon":18.577669143676758,"gpsQuality":3},{"line":"6","vehicleId":420,"speed":20,"delay":18,"lat":54.4221305847168,"lon":18.589929580688477,"gpsQuality":3},{"line":"199","vehicleId":145719,"speed":30,"delay":65,"lat":54.35858917236328,"lon":18.647109985351562,"gpsQuality":3},{"line":"179","vehicleId":194,"speed":35,"delay":86,"lat":54.417991638183594,"lon":18.541400909423828,"gpsQuality":3},{"line":"8","vehicleId":421,"speed":25,"delay":36,"lat":54.34654998779297,"lon":18.65159034729004,"gpsQuality":3},{"line":"112","vehicleId":145729,"speed":40,"delay":48,"lat":54.34492111206055,"lon":18.665210723876953,"gpsQuality":3},{"line":"12","vehicleId":284,"speed":0,"delay":-44,"lat":54.3638801574707,"lon":18.638599395751953,"gpsQuality":3},{"line":"2","vehicleId":443,"speed":10,"delay":-21,"lat":54.34175109863281,"lon":18.617700576782227,"gpsQuality":3},{"line":"115","vehicleId":177,"speed":35,"delay":211,"lat":54.351131439208984,"lon":18.596569061279297,"gpsQuality":3},{"line":"5","vehicleId":390,"speed":30,"delay":-28,"lat":54.404361724853516,"lon":18.647899627685547,"gpsQuality":3},{"line":"168","vehicleId":145701,"speed":0,"delay":0,"lat":54.38127899169922,"lon":18.604589462280273,"gpsQuality":3},{"line":"210","vehicleId":145593,"speed":0,"delay":0,"lat":54.322879791259766,"lon":18.632129669189453,"gpsQuality":3},{"line":"8","vehicleId":422,"speed":0,"delay":0,"lat":54.4232292175293,"lon":18.592859268188477,"gpsQuality":3},{"line":"8","vehicleId":218,"speed":15,"delay":96,"lat":54.38307189941406,"lon":18.62187957763672,"gpsQuality":3},{"line":"9","vehicleId":141556,"speed":0,"delay":0,"lat":54.36117935180664,"lon":18.707670211791992,"gpsQuality":3},{"line":"113","vehicleId":179,"speed":0,"delay":-21,"lat":54.326698303222656,"lon":18.609359741210938,"gpsQuality":3},{"line":"127","vehicleId":145736,"speed":10,"delay":125,"lat":54.38248062133789,"lon":18.59881019592285,"gpsQuality":3},{"line":"167","vehicleId":94,"speed":20,"delay":231,"lat":54.34811019897461,"lon":18.534400939941406,"gpsQuality":3},{"line":"122","vehicleId":145663,"speed":0,"delay":151,"lat":54.37989044189453,"lon":18.590160369873047,"gpsQuality":3},{"line":"123","vehicleId":145706,"speed":30,"delay":-11,"lat":54.328880310058594,"lon":18.64150047302246,"gpsQuality":3},{"line":"127","vehicleId":90,"speed":0,"delay":-20,"lat":54.385948181152344,"lon":18.6047306060791,"gpsQuality":3},{"line":"5","vehicleId":436,"speed":0,"delay":26,"lat":54.37385177612305,"lon":18.621700286865234,"gpsQuality":3},{"line":"10","vehicleId":303,"speed":5,"delay":42,"lat":54.39992141723633,"lon":18.67112922668457,"gpsQuality":3},{"line":"12","vehicleId":491,"speed":0,"delay":97,"lat":54.35554885864258,"lon":18.58847999572754,"gpsQuality":3},{"line":"5","vehicleId":485,"speed":0,"delay":-16,"lat":54.406158447265625,"lon":18.644180297851562,"gpsQuality":3},{"line":"115","vehicleId":175,"speed":35,"delay":-19,"lat":54.3388786315918,"lon":18.600589752197266,"gpsQuality":3},{"line":"112","vehicleId":145725,"speed":40,"delay":138,"lat":54.33639144897461,"lon":18.922330856323242,"gpsQuality":3},{"line":"12","vehicleId":145742,"speed":15,"delay":-17,"lat":54.35115051269531,"lon":18.636600494384766,"gpsQuality":3},{"line":"116","vehicleId":145687,"speed":0,"delay":100,"lat":54.380008697509766,"lon":18.586509704589844,"gpsQuality":3},{"line":"4","vehicleId":406,"speed":0,"delay":0,"lat":54.423179626464844,"lon":18.59231948852539,"gpsQuality":3},{"line":"12","vehicleId":141567,"speed":30,"delay":40,"lat":54.38216018676758,"lon":18.598800659179688,"gpsQuality":3},{"line":"127","vehicleId":145738,"speed":10,"delay":55,"lat":54.350120544433594,"lon":18.573610305786133,"gpsQuality":3},{"line":"10","vehicleId":402,"speed":40,"delay":232,"lat":54.35293960571289,"lon":18.590890884399414,"gpsQuality":3},{"line":"283","vehicleId":145696,"speed":0,"delay":0,"lat":54.380279541015625,"lon":18.55879020690918,"gpsQuality":3},{"line":"3","vehicleId":397,"speed":40,"delay":78,"lat":54.39487075805664,"lon":18.622329711914062,"gpsQuality":3},{"line":"5","vehicleId":268,"speed":10,"delay":152,"lat":54.40985870361328,"lon":18.565900802612305,"gpsQuality":3},{"line":"118","vehicleId":145737,"speed":0,"delay":-23,"lat":54.330970764160156,"lon":18.60059928894043,"gpsQuality":3},{"line":"227","vehicleId":100,"speed":0,"delay":-13,"lat":54.33995819091797,"lon":18.601320266723633,"gpsQuality":3},{"line":"118","vehicleId":474,"speed":0,"delay":63,"lat":54.3384895324707,"lon":18.606809616088867,"gpsQuality":3},{"line":"8","vehicleId":423,"speed":20,"delay":3,"lat":54.39812088012695,"lon":18.595739364624023,"gpsQuality":3},{"line":"268","vehicleId":78,"speed":25,"delay":27,"lat":54.338600158691406,"lon":18.509809494018555,"gpsQuality":3},{"line":"5","vehicleId":510,"speed":0,"delay":0,"lat":54.39910125732422,"lon":18.5952205657959,"gpsQuality":3},{"line":"167","vehicleId":103,"speed":15,"delay":603,"lat":54.34899139404297,"lon":18.615140914916992,"gpsQuality":3},{"line":"136","vehicleId":145625,"speed":20,"delay":154,"lat":54.384071350097656,"lon":18.599559783935547,"gpsQuality":3},{"line":"6","vehicleId":489,"speed":45,"delay":16,"lat":54.32463836669922,"lon":18.603639602661133,"gpsQuality":3},{"line":"148","vehicleId":471,"speed":30,"delay":257,"lat":54.40359878540039,"lon":18.6240291595459,"gpsQuality":3},{"line":"199","vehicleId":473,"speed":0,"delay":0,"lat":54.41120910644531,"lon":18.572309494018555,"gpsQuality":3},{"line":"210","vehicleId":145587,"speed":60,"delay":140,"lat":54.33435821533203,"lon":18.635459899902344,"gpsQuality":3},{"line":"156","vehicleId":79,"speed":10,"delay":-32,"lat":54.311458587646484,"lon":18.566509246826172,"gpsQuality":3},{"line":"199","vehicleId":98,"speed":20,"delay":-56,"lat":54.37017822265625,"lon":18.610620498657227,"gpsQuality":3},{"line":"168","vehicleId":203,"speed":0,"delay":0,"lat":54.34217071533203,"lon":18.49925994873047,"gpsQuality":3},{"line":"126","vehicleId":145639,"speed":25,"delay":186,"lat":54.3654899597168,"lon":18.49074935913086,"gpsQuality":3},{"line":"227","vehicleId":192,"speed":20,"delay":-73,"lat":54.41511917114258,"lon":18.58686065673828,"gpsQuality":3},{"line":"11","vehicleId":272,"speed":5,"delay":36,"lat":54.37181091308594,"lon":18.625200271606445,"gpsQuality":3},{"line":"12","vehicleId":141538,"speed":10,"delay":41,"lat":54.39585876464844,"lon":18.57159996032715,"gpsQuality":3},{"line":"255","vehicleId":145660,"speed":0,"delay":0,"lat":54.32278823852539,"lon":18.60634994506836,"gpsQuality":3},{"line":"111","vehicleId":466,"speed":45,"delay":-18,"lat":54.3554801940918,"lon":18.745500564575195,"gpsQuality":3},{"line":"124","vehicleId":145700,"speed":0,"delay":0,"lat":54.3809814453125,"lon":18.606159210205078,"gpsQuality":3},{"line":"10","vehicleId":274,"speed":5,"delay":-31,"lat":54.37628936767578,"lon":18.6306095123291,"gpsQuality":3},{"line":"130","vehicleId":178,"speed":10,"delay":384,"lat":54.35805130004883,"lon":18.656219482421875,"gpsQuality":3},{"line":"12","vehicleId":141539,"speed":30,"delay":-25,"lat":54.3514518737793,"lon":18.592309951782227,"gpsQuality":3},{"line":"143","vehicleId":145667,"speed":0,"delay":0,"lat":54.41128921508789,"lon":18.57261085510254,"gpsQuality":3},{"line":"3","vehicleId":492,"speed":20,"delay":35,"lat":54.3477897644043,"lon":18.643720626831055,"gpsQuality":3},{"line":"120","vehicleId":464,"speed":10,"delay":42,"lat":54.337158203125,"lon":18.599689483642578,"gpsQuality":3},{"line":"169","vehicleId":145603,"speed":0,"delay":0,"lat":54.382930755615234,"lon":18.46735954284668,"gpsQuality":3},{"line":"8","vehicleId":454,"speed":5,"delay":-21,"lat":54.38956832885742,"lon":18.608600616455078,"gpsQuality":3},{"line":"108","vehicleId":524,"speed":0,"delay":-74,"lat":54.3372917175293,"lon":18.616409301757812,"gpsQuality":3},{"line":"5","vehicleId":482,"speed":0,"delay":338,"lat":54.404300689697266,"lon":18.591060638427734,"gpsQuality":3},{"line":"262","vehicleId":460,"speed":15,"delay":22,"lat":54.38045120239258,"lon":18.60757064819336,"gpsQuality":3},{"line":"110","vehicleId":145600,"speed":5,"delay":0,"lat":54.382720947265625,"lon":18.46780014038086,"gpsQuality":3},{"line":"115","vehicleId":145712,"speed":0,"delay":0,"lat":54.318031311035156,"lon":18.56899070739746,"gpsQuality":3},{"line":"179","vehicleId":200,"speed":35,"delay":73,"lat":54.42145919799805,"lon":18.46441078186035,"gpsQuality":3},{"line":"149","vehicleId":145605,"speed":0,"delay":170,"lat":54.38724136352539,"lon":18.609779357910156,"gpsQuality":3},{"line":"143","vehicleId":145671,"speed":35,"delay":56,"lat":54.447120666503906,"lon":18.5504207611084,"gpsQuality":3},{"line":"210","vehicleId":145589,"speed":0,"delay":0,"lat":54.420711517333984,"lon":18.45203971862793,"gpsQuality":3},{"line":"169","vehicleId":465,"speed":0,"delay":0,"lat":54.40950012207031,"lon":18.567779541015625,"gpsQuality":3},{"line":"11","vehicleId":377,"speed":5,"delay":-18,"lat":54.33843994140625,"lon":18.605690002441406,"gpsQuality":3},{"line":"200","vehicleId":145648,"speed":0,"delay":-24,"lat":54.33258819580078,"lon":18.634889602661133,"gpsQuality":3},{"line":"117","vehicleId":145659,"speed":35,"delay":126,"lat":54.42610168457031,"lon":18.563129425048828,"gpsQuality":3},{"line":"10","vehicleId":325,"speed":10,"delay":42,"lat":54.399070739746094,"lon":18.670169830322266,"gpsQuality":3},{"line":"512","vehicleId":145,"speed":10,"delay":-29,"lat":54.311561584472656,"lon":18.916139602661133,"gpsQuality":3},{"line":"130","vehicleId":145722,"speed":10,"delay":286,"lat":54.358280181884766,"lon":18.587270736694336,"gpsQuality":3},{"line":"9","vehicleId":141565,"speed":0,"delay":-79,"lat":54.37582015991211,"lon":18.614999771118164,"gpsQuality":3},{"line":"210","vehicleId":145590,"speed":10,"delay":-16,"lat":54.38267135620117,"lon":18.475770950317383,"gpsQuality":3},{"line":"130","vehicleId":145702,"speed":0,"delay":0,"lat":54.35268020629883,"lon":18.54977035522461,"gpsQuality":3},{"line":"156","vehicleId":145644,"speed":30,"delay":117,"lat":54.331199645996094,"lon":18.569929122924805,"gpsQuality":3},{"line":"115","vehicleId":145708,"speed":5,"delay":384,"lat":54.37329864501953,"lon":18.623239517211914,"gpsQuality":3},{"line":"189","vehicleId":71,"speed":15,"delay":34,"lat":54.309959411621094,"lon":18.62034034729004,"gpsQuality":3},{"line":"T8","vehicleId":173,"speed":0,"delay":0,"lat":54.37247085571289,"lon":18.729190826416016,"gpsQuality":3},{"line":"8","vehicleId":297,"speed":0,"delay":44,"lat":54.42033004760742,"lon":18.584169387817383,"gpsQuality":3},{"line":"9","vehicleId":141557,"speed":5,"delay":-16,"lat":54.38705062866211,"lon":18.590850830078125,"gpsQuality":3},{"line":"131","vehicleId":145685,"speed":0,"delay":-69,"lat":54.36083984375,"lon":18.57670021057129,"gpsQuality":3},{"line":"2","vehicleId":141558,"speed":0,"delay":-16,"lat":54.41259002685547,"lon":18.587810516357422,"gpsQuality":3},{"line":"3","vehicleId":411,"speed":20,"delay":68,"lat":54.356651306152344,"lon":18.645870208740234,"gpsQuality":3},{"line":"189","vehicleId":171,"speed":0,"delay":0,"lat":54.361610412597656,"lon":18.645540237426758,"gpsQuality":3},{"line":"11","vehicleId":270,"speed":0,"delay":-14,"lat":54.33837890625,"lon":18.60658073425293,"gpsQuality":3},{"line":"113","vehicleId":89,"speed":0,"delay":0,"lat":54.3055305480957,"lon":18.581180572509766,"gpsQuality":3},{"line":"127","vehicleId":196,"speed":0,"delay":0,"lat":54.411190032958984,"lon":18.572269439697266,"gpsQuality":3},{"line":"4","vehicleId":447,"speed":0,"delay":-83,"lat":54.322750091552734,"lon":18.606740951538086,"gpsQuality":3},{"line":"171","vehicleId":1353,"speed":35,"delay":90,"lat":54.44493103027344,"lon":18.420799255371094,"gpsQuality":3},{"line":"2","vehicleId":424,"speed":0,"delay":97,"lat":54.376258850097656,"lon":18.623580932617188,"gpsQuality":3},{"line":"5","vehicleId":141563,"speed":10,"delay":-55,"lat":54.37474060058594,"lon":18.620250701904297,"gpsQuality":3},{"line":"8","vehicleId":487,"speed":10,"delay":137,"lat":54.36006164550781,"lon":18.648239135742188,"gpsQuality":3},{"line":"171","vehicleId":145654,"speed":5,"delay":207,"lat":54.40959167480469,"lon":18.562170028686523,"gpsQuality":3},{"line":"199","vehicleId":190,"speed":5,"delay":102,"lat":54.40898132324219,"lon":18.604970932006836,"gpsQuality":3},{"line":"10","vehicleId":323,"speed":0,"delay":-86,"lat":54.34804916381836,"lon":18.607009887695312,"gpsQuality":3},{"line":"186","vehicleId":145705,"speed":0,"delay":0,"lat":54.36159896850586,"lon":18.645570755004883,"gpsQuality":3},{"line":"106","vehicleId":456,"speed":5,"delay":171,"lat":54.357730865478516,"lon":18.68634033203125,"gpsQuality":3},{"line":"T8","vehicleId":356,"speed":30,"delay":-5,"lat":54.360721588134766,"lon":18.693300247192383,"gpsQuality":3},{"line":"213","vehicleId":180,"speed":45,"delay":67,"lat":54.31330871582031,"lon":18.590450286865234,"gpsQuality":3},{"line":"283","vehicleId":145626,"speed":5,"delay":41,"lat":54.373008728027344,"lon":18.62504005432129,"gpsQuality":3},{"line":"132","vehicleId":145657,"speed":0,"delay":9,"lat":54.262481689453125,"lon":18.63511085510254,"gpsQuality":3},{"line":"127","vehicleId":92,"speed":30,"delay":138,"lat":54.4099006652832,"lon":18.601390838623047,"gpsQuality":3},{"line":"111","vehicleId":145699,"speed":0,"delay":0,"lat":54.36138916015625,"lon":18.645450592041016,"gpsQuality":3},{"line":"227","vehicleId":145717,"speed":0,"delay":0,"lat":54.42319107055664,"lon":18.59415054321289,"gpsQuality":3},{"line":"911","vehicleId":145676,"speed":0,"delay":212,"lat":54.34492111206055,"lon":18.647289276123047,"gpsQuality":3},{"line":"148","vehicleId":145591,"speed":0,"delay":26,"lat":54.40433883666992,"lon":18.62548065185547,"gpsQuality":3},{"line":"186","vehicleId":145711,"speed":35,"delay":-103,"lat":54.34598159790039,"lon":18.77252960205078,"gpsQuality":3},{"line":"4","vehicleId":442,"speed":30,"delay":-11,"lat":54.38689041137695,"lon":18.610809326171875,"gpsQuality":3},{"line":"199","vehicleId":145730,"speed":0,"delay":275,"lat":54.38309097290039,"lon":18.59903907775879,"gpsQuality":3},{"line":"210","vehicleId":145592,"speed":30,"delay":184,"lat":54.35763931274414,"lon":18.63772964477539,"gpsQuality":3},{"line":"12","vehicleId":326,"speed":40,"delay":3,"lat":54.39815139770508,"lon":18.569299697875977,"gpsQuality":3},{"line":"155","vehicleId":80,"speed":15,"delay":0,"lat":54.323490142822266,"lon":18.605709075927734,"gpsQuality":3},{"line":"8","vehicleId":231,"speed":5,"delay":79,"lat":54.42047882080078,"lon":18.58477020263672,"gpsQuality":3},{"line":"T8","vehicleId":145627,"speed":35,"delay":161,"lat":54.364768981933594,"lon":18.71923065185547,"gpsQuality":3},{"line":"3","vehicleId":403,"speed":0,"delay":0,"lat":54.33720016479492,"lon":18.617189407348633,"gpsQuality":3},{"line":"6","vehicleId":409,"speed":0,"delay":77,"lat":54.355098724365234,"lon":18.645450592041016,"gpsQuality":3},{"line":"6","vehicleId":444,"speed":35,"delay":-6,"lat":54.32442855834961,"lon":18.604400634765625,"gpsQuality":3},{"line":"8","vehicleId":249,"speed":0,"delay":140,"lat":54.35715103149414,"lon":18.64604949951172,"gpsQuality":3},{"line":"130","vehicleId":204,"speed":35,"delay":-68,"lat":54.355430603027344,"lon":18.597389221191406,"gpsQuality":3},{"line":"205","vehicleId":145645,"speed":0,"delay":204,"lat":54.2624397277832,"lon":18.636199951171875,"gpsQuality":3},{"line":"162","vehicleId":145723,"speed":30,"delay":171,"lat":54.33699035644531,"lon":18.59885025024414,"gpsQuality":3},{"line":"4","vehicleId":412,"speed":0,"delay":0,"lat":54.42332077026367,"lon":18.592729568481445,"gpsQuality":3},{"line":"162","vehicleId":366,"speed":20,"delay":1,"lat":54.32699966430664,"lon":18.610549926757812,"gpsQuality":3},{"line":"12","vehicleId":145741,"speed":0,"delay":94,"lat":54.362308502197266,"lon":18.641260147094727,"gpsQuality":3},{"line":"262","vehicleId":145734,"speed":0,"delay":0,"lat":54.31809997558594,"lon":18.568950653076172,"gpsQuality":3},{"line":"262","vehicleId":476,"speed":0,"delay":114,"lat":54.33586120605469,"lon":18.600679397583008,"gpsQuality":3},{"line":"110","vehicleId":145598,"speed":0,"delay":36,"lat":54.3791389465332,"lon":18.58769989013672,"gpsQuality":3},{"line":"148","vehicleId":193,"speed":0,"delay":0,"lat":54.39619064331055,"lon":18.673460006713867,"gpsQuality":3},{"line":"249","vehicleId":145674,"speed":10,"delay":34,"lat":54.38771057128906,"lon":18.624589920043945,"gpsQuality":3},{"line":"158","vehicleId":182,"speed":5,"delay":-17,"lat":54.36370849609375,"lon":18.707979202270508,"gpsQuality":3},{"line":"158","vehicleId":145713,"speed":50,"delay":175,"lat":54.39479064941406,"lon":18.60235023498535,"gpsQuality":3},{"line":"175","vehicleId":145666,"speed":0,"delay":14,"lat":54.323829650878906,"lon":18.60540008544922,"gpsQuality":3},{"line":"157","vehicleId":145697,"speed":10,"delay":-3,"lat":54.37794876098633,"lon":18.578279495239258,"gpsQuality":3},{"line":"10","vehicleId":399,"speed":30,"delay":-66,"lat":54.358638763427734,"lon":18.579069137573242,"gpsQuality":3},{"line":"100","vehicleId":509,"speed":0,"delay":-22,"lat":54.35527038574219,"lon":18.645259857177734,"gpsQuality":3},{"line":"131","vehicleId":145677,"speed":0,"delay":298,"lat":54.3643798828125,"lon":18.612390518188477,"gpsQuality":3},{"line":"171","vehicleId":145640,"speed":35,"delay":80,"lat":54.46437072753906,"lon":18.458309173583984,"gpsQuality":3},{"line":"168","vehicleId":145732,"speed":5,"delay":97,"lat":54.33864974975586,"lon":18.564510345458984,"gpsQuality":3},{"line":"157","vehicleId":172,"speed":0,"delay":0,"lat":54.38179016113281,"lon":18.60399055480957,"gpsQuality":3},{"line":"120","vehicleId":145680,"speed":0,"delay":-29,"lat":54.331729888916016,"lon":18.569780349731445,"gpsQuality":3},{"line":"110","vehicleId":145596,"speed":0,"delay":582,"lat":54.378028869628906,"lon":18.5810604095459,"gpsQuality":3},{"line":"210","vehicleId":145594,"speed":40,"delay":3,"lat":54.372230529785156,"lon":18.56924057006836,"gpsQuality":3},{"line":"11","vehicleId":267,"speed":0,"delay":0,"lat":54.39128112792969,"lon":18.57863998413086,"gpsQuality":3},{"line":"4","vehicleId":141554,"speed":25,"delay":-32,"lat":54.34941864013672,"lon":18.64188003540039,"gpsQuality":3},{"line":"4","vehicleId":446,"speed":40,"delay":-79,"lat":54.38520050048828,"lon":18.61256980895996,"gpsQuality":3},{"line":"2","vehicleId":479,"speed":5,"delay":-21,"lat":54.374969482421875,"lon":18.623769760131836,"gpsQuality":3},{"line":"155","vehicleId":145709,"speed":0,"delay":87,"lat":54.323509216308594,"lon":18.605899810791016,"gpsQuality":3},{"line":"8","vehicleId":243,"speed":0,"delay":0,"lat":54.357601165771484,"lon":18.684179306030273,"gpsQuality":3},{"line":"T8","vehicleId":355,"speed":10,"delay":8,"lat":54.3567008972168,"lon":18.68071937561035,"gpsQuality":3},{"line":"175","vehicleId":181,"speed":0,"delay":-64,"lat":54.34798049926758,"lon":18.606569290161133,"gpsQuality":3},{"line":"295","vehicleId":145606,"speed":0,"delay":0,"lat":54.31978988647461,"lon":18.577199935913086,"gpsQuality":3},{"line":"113","vehicleId":467,"speed":0,"delay":0,"lat":54.32297134399414,"lon":18.632299423217773,"gpsQuality":3},{"line":"107","vehicleId":145670,"speed":5,"delay":29,"lat":54.25815963745117,"lon":18.64999008178711,"gpsQuality":3},{"line":"132","vehicleId":145655,"speed":40,"delay":-18,"lat":54.317840576171875,"lon":18.629629135131836,"gpsQuality":3},{"line":"184","vehicleId":169,"speed":0,"delay":64,"lat":54.35224151611328,"lon":18.645849227905273,"gpsQuality":3},{"line":"156","vehicleId":145707,"speed":0,"delay":-61,"lat":54.34806823730469,"lon":18.60662078857422,"gpsQuality":3},{"line":"6","vehicleId":415,"speed":20,"delay":-44,"lat":54.38726043701172,"lon":18.58340072631836,"gpsQuality":3},{"line":"10","vehicleId":273,"speed":0,"delay":-53,"lat":54.35213851928711,"lon":18.646249771118164,"gpsQuality":3},{"line":"131","vehicleId":145684,"speed":30,"delay":1602,"lat":54.36334991455078,"lon":18.61574935913086,"gpsQuality":3},{"line":"9","vehicleId":141537,"speed":35,"delay":-10,"lat":54.34611129760742,"lon":18.668659210205078,"gpsQuality":3},{"line":"6","vehicleId":395,"speed":0,"delay":-14,"lat":54.420570373535156,"lon":18.584880828857422,"gpsQuality":3},{"line":"2","vehicleId":440,"speed":15,"delay":5,"lat":54.33810043334961,"lon":18.618040084838867,"gpsQuality":3},{"line":"154","vehicleId":95,"speed":15,"delay":0,"lat":54.361968994140625,"lon":18.64529037475586,"gpsQuality":3},{"line":"12","vehicleId":145743,"speed":0,"delay":-21,"lat":54.380008697509766,"lon":18.60283088684082,"gpsQuality":3},{"line":"6","vehicleId":426,"speed":35,"delay":67,"lat":54.38969039916992,"lon":18.579790115356445,"gpsQuality":3},{"line":"283","vehicleId":145695,"speed":15,"delay":58,"lat":54.37953186035156,"lon":18.6341495513916,"gpsQuality":3},{"line":"5","vehicleId":265,"speed":30,"delay":155,"lat":54.404869079589844,"lon":18.564109802246094,"gpsQuality":3},{"line":"115","vehicleId":145710,"speed":30,"delay":91,"lat":54.325809478759766,"lon":18.54994010925293,"gpsQuality":3},{"line":"8","vehicleId":486,"speed":35,"delay":85,"lat":54.38092041015625,"lon":18.621910095214844,"gpsQuality":3},{"line":"9","vehicleId":502,"speed":0,"delay":0,"lat":54.38978958129883,"lon":18.577220916748047,"gpsQuality":3},{"line":"262","vehicleId":145716,"speed":10,"delay":-31,"lat":54.31795120239258,"lon":18.586429595947266,"gpsQuality":3},{"line":"112","vehicleId":145726,"speed":50,"delay":-92,"lat":54.34231948852539,"lon":18.86570930480957,"gpsQuality":3},{"line":"4","vehicleId":441,"speed":25,"delay":-104,"lat":54.35506057739258,"lon":18.643259048461914,"gpsQuality":3},{"line":"227","vehicleId":145740,"speed":0,"delay":87,"lat":54.33700942993164,"lon":18.599010467529297,"gpsQuality":3},{"line":"127","vehicleId":459,"speed":0,"delay":74,"lat":54.40837860107422,"lon":18.588300704956055,"gpsQuality":3},{"line":"195","vehicleId":521,"speed":15,"delay":-17,"lat":54.33277893066406,"lon":18.593860626220703,"gpsQuality":3},{"line":"130","vehicleId":87,"speed":0,"delay":0,"lat":54.35316848754883,"lon":18.549650192260742,"gpsQuality":3},{"line":"162","vehicleId":197,"speed":10,"delay":86,"lat":54.381500244140625,"lon":18.604660034179688,"gpsQuality":3},{"line":"123","vehicleId":58,"speed":0,"delay":0,"lat":54.36153030395508,"lon":18.645830154418945,"gpsQuality":3},{"line":"122","vehicleId":145665,"speed":0,"delay":40,"lat":54.401790618896484,"lon":18.573280334472656,"gpsQuality":3},{"line":"124","vehicleId":145602,"speed":0,"delay":95,"lat":54.40393829345703,"lon":18.612180709838867,"gpsQuality":3},{"line":"2","vehicleId":425,"speed":0,"delay":0,"lat":54.40959167480469,"lon":18.567289352416992,"gpsQuality":3},{"line":"8","vehicleId":453,"speed":35,"delay":-117,"lat":54.34635925292969,"lon":18.668859481811523,"gpsQuality":3},{"line":"154","vehicleId":145720,"speed":30,"delay":159,"lat":54.33061981201172,"lon":18.63283920288086,"gpsQuality":3},{"line":"10","vehicleId":520,"speed":0,"delay":0,"lat":54.3967399597168,"lon":18.672239303588867,"gpsQuality":3},{"line":"168","vehicleId":189,"speed":0,"delay":236,"lat":54.347869873046875,"lon":18.60334014892578,"gpsQuality":3},{"line":"11","vehicleId":404,"speed":0,"delay":-22,"lat":54.369258880615234,"lon":18.62955093383789,"gpsQuality":3},{"line":"12","vehicleId":141561,"speed":0,"delay":0,"lat":54.41025924682617,"lon":18.566699981689453,"gpsQuality":3},{"line":"12","vehicleId":141536,"speed":10,"delay":157,"lat":54.351829528808594,"lon":18.64242935180664,"gpsQuality":3},{"line":"227","vehicleId":145718,"speed":15,"delay":185,"lat":54.37794876098633,"lon":18.57823944091797,"gpsQuality":3},{"line":"174","vehicleId":145673,"speed":40,"delay":223,"lat":54.332279205322266,"lon":18.578609466552734,"gpsQuality":3},{"line":"3","vehicleId":287,"speed":5,"delay":25,"lat":54.40169143676758,"lon":18.622499465942383,"gpsQuality":3},{"line":"262","vehicleId":211,"speed":0,"delay":-15,"lat":54.35886001586914,"lon":18.58765983581543,"gpsQuality":3},{"line":"10","vehicleId":392,"speed":5,"delay":-26,"lat":54.3489990234375,"lon":18.613170623779297,"gpsQuality":3},{"line":"10","vehicleId":221,"speed":15,"delay":-79,"lat":54.356658935546875,"lon":18.64596939086914,"gpsQuality":3},{"line":"184","vehicleId":85,"speed":5,"delay":100,"lat":54.35837936401367,"lon":18.587270736694336,"gpsQuality":3},{"line":"169","vehicleId":145714,"speed":15,"delay":-142,"lat":54.38933181762695,"lon":18.48257064819336,"gpsQuality":3},{"line":"154","vehicleId":145728,"speed":0,"delay":-28,"lat":54.3302001953125,"lon":18.626880645751953,"gpsQuality":3}]}');

export default class LocalSource implements ISource {
    getStops(day?: Date): Promise<Timestamp<Stop[]>> {
        const result = {
            lastUpdate: new Date(),
            data: STOPS
        };
        return Promise.resolve(result);
    }
    async getDelays(stopId: number): Promise<Timestamp<Delay[]>> {
        return {
            lastUpdate: new Date(),
            data: Array(randInt(7))
                .fill(0)
                .map(() => addSeconds(new Date(), randInt(-5000, 5000)))
                .map(theory => [theory, addSeconds(theory, randInt(5000))])
                .map(([theoretical, estimated]) => ({
                    routeId: randInt(1, 200),
                    theoretical,
                    estimated,
                    seconds: Math.trunc((+estimated - +theoretical) * 1000),
                    headsign: "Stop " + randInt(1, 200)

                }))
        };
    }

    async getLive(): Promise<Timestamp<Vehicle[]>> {
        return {
            lastUpdate: new Date(),
            data: (LIVE.vehicles as any[]).map((raw) => {
                return {
                    line: raw.line,
                    vehicleId: raw.vehicleId,
                    speed: raw.speed,
                    delay: raw.delay,
                    gpsQuality: raw.gpsQuality,
                    latitude: raw.lat,
                    longitude: raw.lon,
                    coordinateSystem: CoordinateSystem.WGS84
                }
            })
        };
    }
}